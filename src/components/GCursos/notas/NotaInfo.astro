---
import type { NotaProps } from "@/types/Nota";
import Fecha from "@/components/GCursos/Fecha.jsx";
import { actions } from "astro:actions";

interface Props {
  categoriaNota: string;
  nota: NotaProps;
}

const { categoriaNota, nota } = Astro.props;

const { data, error } = await actions.getUsers();
console.log(data);
---

<div class="objeto">
  <h1>
    {nota.nombre}
    <div class="pill rainbow rainbow-40">
      {categoriaNota}
    </div>
  </h1>
  <h2>
    {nota.fecha && <Fecha timestamp={nota.fecha} />}
  </h2>
</div>
<ul class="submodulo">
  <li class="sel">
    <a>Notas</a>
  </li>
</ul>
<table class="detalle">
  <colgroup>
    <col class="col0 undefined" />
    <col class="col1 undefined" />
  </colgroup>
  <tbody>
    <tr class="even">
      <th>Ponderación</th>
      <td>Porcentaje</td>
    </tr>
    <tr class="odd">
      <th>Escala</th>
      <td> 1.0 - 7.0 </td>
    </tr>
  </tbody>
</table>
<form id="formulario" autocomplete="off">
  <input type="submit" value="Guardar" />
  <table id="notas" class="sortable excel txt notas">
    <caption> </caption>
    <colgroup
      ><col class="col0 number" /><col class="col1 string" /><col
        class="col2 string only-print"
      /><col class="col3 number" /><col
        class="col4 string only-print"
      /></colgroup
    >
    <thead class="sticky">
      <tr class="even">
        <th class="number">Nº</th>
        <th class="string"><h1>Persona</h1><h2>RUT</h2></th>
        <th class="string only-print">Estado</th>
        <th class="number">Nota</th>
        <th class="string only-print">Observaciones</th>
      </tr>
    </thead>
    <tbody>
      {
        data?.map((user, index) => (
          <tr class={index % 2 === 0 ? "even" : "odd"}>
            <td class="number">{index + 1}</td>
            <td class="string">
              <div class="objetoflex">
                <img
                  src="https://static.u-cursos.cl/images/avatar.jpg"
                  alt={user.nombre}
                  class="photo foto chica"
                />
                <div>
                  <h1>{user.nombre_completo}</h1>
                  <h2>{user.nombre}</h2>
                </div>
              </div>
            </td>
            <td class="string only-print">Activo</td>
            <td class="number">
              <input
                type="text"
                name="notas[21963898][1]"
                value=""
                class=""
                autocomplete="off"
                tabindex="95"
              />
            </td>
            <td class="only-print string" />
          </tr>
        ))
      }
    </tbody>
    <tfoot></tfoot>
  </table>
  <input type="submit" value="Guardar" />
</form>
